<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Rock Paper Scissors</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <section class="heading">
        <h1>Rock Paper Scissors</h1>
    </section>
    <section class="play">
        <button class="hand" onclick="play('rock')">
            <img src="https://nehalhazem.github.io/rockPaperScissors.io/img/rock.png" alt="">
        </button>
        
        <button class="hand" onclick="play('paper')">
            <img src="https://sihoonathan.github.io/rock-paper-scissors/assets/img/paper.png" alt="">
        </button>
        
        <button class="hand" onclick="play('scissors')">
            <img src="https://rock-paper-scissors-lilac-alpha.vercel.app/static/media/scissors.png" alt="">
        </button>
    </section>
    <section class="scoreBoard">
        <p class="js-result"></p>
        <h2 class="scores" id="scoreDisplay">Wins : 0 , Losses : 0 , Ties : 0</h2>
        <button class="resetButton" onclick="resetScore()">Reset Score</button>
    </section>
    <footer>
        <p>Made By | Rahul Chauhan</p>
    </footer>
    <script>
        let score = JSON.parse(localStorage.getItem('score')) || {
            wins : 0,
            losses : 0,
            ties : 0,
        };

        function updateScoreBoard() {
            document.getElementById('scoreDisplay').textContent =
                `Wins : ${score.wins} , Losses : ${score.losses} , Ties : ${score.ties}`;
        }

        updateScoreBoard();

        function play(playerMove){
            const computerMove = pickComputerMove();
            let result = '';

            if(playerMove === 'rock'){
                if(computerMove === 'rock'){
                    result = 'tie';
                }else if(computerMove === 'paper'){
                    result = 'lose';
                }else {
                    result = 'win';
                }
            }else if(playerMove === 'paper'){
                if(computerMove === 'rock'){
                    result = 'win';
                }else if(computerMove === 'paper'){
                    result = 'tie';
                }else {
                    result = 'lose';
                }
            }else if(playerMove === 'scissors'){
                if(computerMove === 'rock'){
                    result = 'lose';
                }else if(computerMove === 'paper'){
                    result = 'win';
                }else {
                    result = 'tie';
                }
            }

            if(result === 'win'){
                score.wins++;
            }else if(result === 'lose'){
                score.losses++;
            }else {
                score.ties++;
            }

            localStorage.setItem('score', JSON.stringify(score));
            updateScoreBoard();

            showResult(result,computerMove,playerMove);
        }
        
        function showResult(result,computerMove,playerMove){
            const resultElement = document.querySelector('.js-result');
            if(resultElement.innerText === ''){
                resultElement.innerText = `You chose ${playerMove} and computer chose ${computerMove}, so you ${result}!`;
            }else{
                resultElement.innerText = `You chose ${playerMove} and computer chose ${computerMove}, so you ${result}!`;
            }
        }

        function pickComputerMove(){
            const randomNumber = Math.random();
            let computerMove = '';

            if(randomNumber < 1/3) {
                computerMove = 'rock';
            }else if(randomNumber < 2/3) {
                computerMove = 'paper';
            }else {
                computerMove = 'scissors';
            }
            return computerMove;
        }

        function resetScore(){
            score = { wins: 0, losses: 0, ties: 0 };
            localStorage.removeItem('score');
            updateScoreBoard();
        }
    </script>
</body>
</html>
